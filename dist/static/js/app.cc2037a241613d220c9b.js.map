{"version":3,"sources":["webpack:///./src/utils/validate.js","webpack:///./src/App.vue?ae33","webpack:///./src/App.vue","webpack:///./src/store/modules/app.js","webpack:///./src/utils/auth.js","webpack:///./src/store/modules/user.js","webpack:///./src/api/api.js","webpack:///./src/utils/commonUtil.js","webpack:///./src/store/modules/settings.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///./src/utils/request.js","webpack:///./src/main.js","webpack:///./src/utils/localStorage.js"],"names":["validatenull","val","Array","length","Object","undefined","JSON","stringify","__webpack_exports__","App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","app","state","sidebar","opened","Cookies","get","withoutAnimation","collapse","device","mutations","CollapseMenu","TOGGLE_SIDEBAR","set","CLOSE_SIDEBAR","TOGGLE_DEVICE","actions","ToggleSideBar","commit","CloseSideBar","ToggleDevice","TokenKey","getToken","removeToken","remove","user","token","name","avatar","roles","isLock","getStore","lockPasswd","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_LOCK_PASSWD","setStore","content","type","SET_LOCK","action","CLEAR_LOCK","removeStore","Login","userInfo","username","trim","Promise","resolve","reject","password","http","url","method","data","login","then","response","catch","error","GetInfo","params","LogOut","resetRouter","FedLogOut","commonUtil","getCircularReplacer","seen","WeakSet","key","value","has","add","notNull","obj","isNull","getSettingStorage","localStorage","getItem","settings","lang","openSetting","showViewsBar","viewBarType","keepViewsByRefresh","collapseMenu","showBreadCrumb","UPDATE_SETTINGS","setItem","updateSettings","param","getters","permission_routers","permission","routers","addRouters","Vue","use","Vuex","store","Store","modules","axios","create","baseURL","timeout","interceptors","request","config","headers","console","log","res","code","Message","message","duration","MessageBox","confirm","confirmButtonText","cancelButtonText","dispatch","location","reload","ElementUI","size","prototype","productionTip","router","h","$mount","__WEBPACK_IMPORTED_MODULE_0__utils_validate__","dataType","datetime","Date","getTime","window","sessionStorage","parse","Number","eval","removeItem","getAllStore","list","i","push","clearStore","clear"],"mappings":"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","file":"static/js/app.cc2037a241613d220c9b.js","sourcesContent":["/**\n * 校验文件\n * 页面引用方式：import { isvalidUsername } from \"../../utils/validate\"\n * 页面使用方式：\n * if (!isvalidUsername(value)) {\n *    callback(new Error('请输入正确的用户名'))\n *  } else {\n *    callback()\n * }\n * \n */\n\nexport function isvalidUsername(str) {\n  const valid_map = ['admin', 'editor']\n  return valid_map.indexOf(str.trim()) >= 0\n}\n\n/* 合法uri*/\nexport function validateURL(textval) {\n  const urlregex = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return urlregex.test(textval)\n}\n\n/* 小写字母*/\nexport function validateLowerCase(str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/* 大写字母*/\nexport function validateUpperCase(str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/* 大小写字母*/\nexport function validatAlphabets(str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n/**\n * 判断是否为空\n */\nexport function validatenull(val) {\n  if (typeof val === 'boolean') {\n    return false\n  }\n  if (val instanceof Array) {\n    if (val.length === 0) return true\n  } else if (val instanceof Object) {\n    if (JSON.stringify(val) === '{}') return true\n  } else {\n    if (val === 'null' || val == null || val === 'undefined' || val === undefined || val === '') return true\n    return false\n  }\n  return false\n}\n\n/**\n * 判断手机号码是否正确\n */\nexport function isvalidatemobile(phone) {\n  const list = []\n  let result = true\n  let msg = ''\n  var isPhone = /^0\\d{2,3}-?\\d{7,8}$/\n  // 增加134 减少|1349[0-9]{7}，增加181,增加145，增加17[678]\n  // const isMob = /^((\\+?86)|(\\(\\+86\\)))?(13[0123456789][0-9]{8}|15[012356789][0-9]{8}|18[012356789][0-9]{8}|14[57][0-9]{8}|17[3678][0-9]{8})$/\n  if (!validatenull(phone)) {\n    if (phone.length === 11) {\n      if (isPhone.test(phone)) {\n        msg = '手机号码格式不正确'\n      } else {\n        result = false\n      }\n    } else {\n      msg = '手机号码长度不为11位'\n    }\n  } else {\n    msg = '手机号码不能为空'\n  }\n  list.push(result)\n  list.push(msg)\n  return list\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/validate.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b6661692\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b6661692\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b6661692\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Cookies from 'js-cookie'\n\nconst app = {  //app模块，侧边栏打开还是收起\n    state: {\n        sidebar: {\n            opened: !+Cookies.get('sidebarStatus'),\n            withoutAnimation: false,\n            collapse: true, //侧边栏打开关闭，默认不折叠\n        },\n        device: 'desktop'\n    },\n    mutations: {\n        CollapseMenu(state){\n            state.sidebar.collapse = !state.sidebar.collapse\n        },\n        TOGGLE_SIDEBAR: state => {\n            if (state.sidebar.opened) {\n                Cookies.set('sidebarStatus', 1)\n            } else {\n                Cookies.set('sidebarStatus', 0)\n            }\n            state.sidebar.opened = !state.sidebar.opened\n        },\n        CLOSE_SIDEBAR: (state, withoutAnimation) => {\n            Cookies.set('sidebarStatus', 1)\n            state.sidebar.opened = false\n            state.sidebar.withoutAnimation = withoutAnimation\n        },\n        TOGGLE_DEVICE: (state, device) => {\n            state.device = device\n        }\n    },\n    actions: {\n        ToggleSideBar: ({ commit }) => {\n            commit('TOGGLE_SIDEBAR')\n        },\n        CloseSideBar ({ commit }, { withoutAnimation }) {\n            commit('CLOSE_SIDEBAR', withoutAnimation)\n        },\n        ToggleDevice ({ commit }, device) {\n            commit('TOGGLE_DEVICE', device)\n        }\n    }\n}\n\nexport default app\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/app.js","//用来获取设置用户token的，用到的是 js-cookie\n\nimport Cookies from 'js-cookie'\n\nconst TokenKey = 'loginToken'\n\nexport function getToken() {\n  return Cookies.get(TokenKey)\n}\n\nexport function setToken(token) {\n  return Cookies.set(TokenKey, token)\n}\n\nexport function removeToken() {\n  return Cookies.remove(TokenKey)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/auth.js","import { login, logout, getInfo } from '@/api/api'\nimport { getToken, setToken, removeToken } from '@/utils/auth' //引用auth里设置Token方法\nimport { resetRouter } from '@/router' //重置路由\nimport { setStore, getStore, removeStore} from '@/utils/localStorage' //锁屏密码存储localStorage\nconst user = { //user模块，token,登录，登出\n    state: {\n        token: getToken(),// 读取cookie里面作为默认值\n        //用户资料\n        name: '',\n        avatar: '',\n        roles: [],\n        //锁屏\n        isLock: getStore({name: 'isLock'}) || false,\n        lockPasswd: getStore({name: 'lockPasswd'}) || '',\n    },\n\n    mutations: {     \n        // 设置token\n        SET_TOKEN: (state, token) => {\n            state.token = token  \n        },\n        SET_NAME: (state, name) => {\n            state.name = name\n        },\n        SET_AVATAR: (state, avatar) => {\n            state.avatar = avatar\n        },\n        SET_ROLES: (state, roles) => {\n            state.roles = roles\n        },\n        //设置锁屏密码\n        SET_LOCK_PASSWD: (state, lockPasswd) => {\n            state.lockPasswd = lockPasswd\n            setStore({\n                name: 'lockPasswd',\n                content: state.lockPasswd,\n                type: 'session'\n            })\n        },\n        //设置锁屏\n        SET_LOCK: (state, action) => {\n            state.isLock = true\n            setStore({\n                name: 'isLock',\n                content: state.isLock,\n                type: 'session'\n            })\n        },\n        //清除锁屏密码\n        CLEAR_LOCK: (state, action) => {\n            state.isLock = false\n            state.lockPasswd = ''\n            removeStore({\n                name: 'lockPasswd'\n            })\n            removeStore({\n                name: 'isLock'\n            })\n        }\n    },\n\n    actions: {\n        // 登录界面调用\n        Login({ commit }, userInfo) {\n            const username = userInfo.username.trim()\n            return new Promise((resolve, reject) => {\n                login(username, userInfo.password).then(response => {\n                    //const data = response.data\n                    const { data } = response\n                    setToken(data.token) //将token存入cookie.js\n                    commit('SET_TOKEN', data.token)//将token存入user的state\n                    resolve()\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n\n        // 获取用户信息\n        GetInfo({ commit, state }) {\n            return new Promise((resolve, reject) => {\n                getInfo(state.token).then(response => {\n                    //一般写法\n                    //const  data = response.data\n                    //解构写法\n                    const { data } = response\n                    if (data.roles && data.roles.length > 0) { // 验证返回的roles是否是一个非空数组\n                        commit('SET_ROLES', data.roles)                \n                    } else {\n                        reject('getInfo: roles must be a non-null array !')\n                    }\n                    commit('SET_NAME', data.username)\n                    commit('SET_AVATAR', data.avatar)\n                    resolve(response)\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n\n        // 登出\n        LogOut({ commit, state }) {\n            return new Promise((resolve, reject) => {\n                logout(state.token).then(() => {\n                    removeToken()\n                    resetRouter() //重置路由\n                    commit('SET_TOKEN', '')\n                    commit('SET_ROLES', [])\n                    \n                    resolve()\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n\n        // 前端 登出\n        FedLogOut({ commit }) {\n            return new Promise(resolve => {\n                commit('SET_TOKEN', '')\n                removeToken()\n                resolve()\n            })\n        }\n    }\n}\n\nexport default user\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/user.js","//封装请求接口api\n//使用方法：\n//①在需要的页面引入 import { login, getInfo } from '@/api/api.js',用什么方法引入什么方法\n//② login(this.username,this.password).then( res => {\n//     if(res.data.code === 200 ){\n//         ...\n//     }\n// } )\n\nimport http from '../utils/request'\n\n// import http from '@/utils/request' @写法也可以\n\n//登录\nexport function login(username, password) {\n    return http({\n        url: '/login',\n        method: 'post',\n        data: {\n            username,\n            password\n        }\n    })\n    //或者\n  //   return http({\n  //     url: '/user/login' + '?username=' + username,\n  //     method: 'post'\n  //   })\n  }\n  //获取token信息\n  export function getInfo(token) {\n    return http({\n      url: '/info',\n      method: 'get',\n      params: { token }\n    })\n  \n    //或者\n  //   return http({\n  //     url: '/user/info' + '?username=' + token,\n  //     method: 'get'\n  //   })\n  }\n  //登出\n  export function logout() {\n    return http({\n      url: '/logout',\n      method: 'post'\n    })\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/api/api.js","const commonUtil = {\n  getCircularReplacer: function () {\n    const seen = new WeakSet()\n    return (key, value) => {\n      if (typeof value === 'object' && value !== null) {\n        if (seen.has(value)) {\n          return\n        }\n        seen.add(value)\n      }\n      return value\n    }\n  },\n  notNull: function (obj) {\n    return obj != null && obj != undefined && obj != 'null' && obj != 'undefined' && obj != ''\n  },\n  isNull: function (obj) {\n    return !this.notNull(obj)\n  },\n  getSettingStorage: function (key) {\n    let val = localStorage.getItem(key)\n    val = this.notNull(val) ? val : false\n    return val == 'true'\n  }\n}\n\nexport default commonUtil\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/commonUtil.js","import commonUtil from '@/utils/commonUtil'\nconst settings = {\n    state: {\n        settings: {\n            //语言\n            lang: localStorage.getItem('lang') || 'zh-CN',\n            //打开设置\n            openSetting: commonUtil.getSettingStorage('openSetting'),\n            //开启视图页签\n            showViewsBar: commonUtil.getSettingStorage('showViewsBar'),\n            //视图页签样式\n            viewBarType: localStorage.getItem('viewBarType') || 'tab',\n            //刷新保留其他视图\n            keepViewsByRefresh: commonUtil.getSettingStorage('keepViewsByRefresh'),\n            //收缩菜单栏\n            collapseMenu: commonUtil.getSettingStorage('collapseMenu'),\n            //保持一个子菜单展开\n            // uniqueOpened: commonUtil.getSettingStorage('uniqueOpened'),\n            //开启面包屑\n            showBreadCrumb: commonUtil.getSettingStorage('showBreadCrumb')\n        }\n    },\n    mutations: {\n        UPDATE_SETTINGS: (state, { key, value, type }) => {\n            if (type && type === 'toggle') {\n                state.settings[key] = !state.settings[key]\n                localStorage.setItem(key, state.settings[key])\n                return\n            }\n            state.settings[key] = value\n            localStorage.setItem(key, value)\n        }\n    },\n    actions: {\n        updateSettings: ({ commit }, param) => {\n            commit('UPDATE_SETTINGS', param)\n        }\n    }\n}\nexport default settings\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/settings.js","// 通过根getters建立对子模块state里面的数据的快捷访问\nconst getters = {\n    sidebar: state => state.app.sidebar,\n    device: state => state.app.device,\n    // visitedViews: state => state.app.visitedViews,\n    token: state => state.user.token,\n    avatar: state => state.user.avatar,\n    name: state => state.user.name,\n    // introduction: state => state.user.introduction,\n    // status: state => state.user.status,\n    roles: state => state.user.roles,\n    // resource: state => state.user.resource,\n    // setting: state => state.user.setting,\n    permission_routers: state => state.permission.routers, //筛选后的路由\n    addRouters: state => state.permission.addRouters,\n    // 锁屏\n    isLock: state => state.user.isLock,\n    lockPasswd: state => state.user.lockPasswd,\n    //设置\n    settings: state => state.settings.settings\n  }\n  export default getters\n  \n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","//组装模块(modules里的都是模块)并导出 store 的地方\n\n//tips: modules里添加模块之后千万别忘了，这里添加，页面引用的时候找不到\n\nimport Vue from 'vue'\nimport Vuex from 'vuex'\n\n// 导入modules里的模块\nimport app from './modules/app'// 设置的更换\nimport user from './modules/user'\nimport permission from './modules/permission'\nimport settings from './modules/settings' //设置\n// 导入根getters\nimport getters from './getters'\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n    // 没有根state,mutation,action,全部都是采用模块化开发vuex\n    // 注册模块\n    modules: {\n        app,\n        user,\n        permission,\n        settings\n    },\n    // 根getters\n    // getters: getters,\n    getters\n  \n})\n\nexport default store\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","//axios二次封装\nimport axios from 'axios'\nimport { Message, MessageBox } from 'element-ui'\nimport store from '../store'\nimport { getToken } from '@/utils/auth'\n\n// 创建axios实例\nconst http = axios.create({\n    // baseURL: process.env.BASE_API, // api的base_url\n    baseURL: 'https://mock.mengxuegu.com/mock/642f916f32affa39a121ce38/routing',//east Mock接口\n  timeout: 15000 // 请求超时时间\n})\n\n// request拦截器\nhttp.interceptors.request.use(config => {\n  if (store.getters.token) { //store -> getters.js -> user.js -> state.token\n    config.headers['token'] = getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\n  }\n  return config\n}, error => {\n  // Do something with request error\n  console.log(error) // for debug\n  Promise.reject(error)\n})\n\n// respone拦截器\nhttp.interceptors.response.use(response => {\n/**\n* code为非200是抛错 可结合自己业务进行修改\n*/\n  const res = response.data\n  if (res.code !== 200) {\n    Message({\n      message: res.data,\n      type: 'error',\n      duration: 3 * 1000\n    })\n    // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\n    if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n      MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n        confirmButtonText: '重新登录',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        store.dispatch('FedLogOut').then(() => {\n          location.reload()// 为了重新实例化vue-router对象 避免bug\n        })\n      })\n    }\n    return Promise.reject('error')\n  } else {\n    return response.data\n  }\n},\nerror => {\n  console.log('err' + error)// for debug\n  Message({\n    message: error.message,\n    type: 'error',\n    duration: 3 * 1000\n  })\n  return Promise.reject(error)\n})\n\nexport default http\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nimport http from './utils/request'//使用封装的axios，在request.js\nimport ElementUI from \"element-ui\"; // 在main.js  中引入 Element\nimport 'element-ui/lib/theme-chalk/index.css';// 在main.js  引入 Element 样式\nimport store from \"./store/index\"\nimport cookie from 'js-cookie'\n// import 'babel-polyfill' //一个转码器，可以将ES6代码转为ES5代码,解决浏览器兼容问题\nimport { getToken } from './utils/auth' // get token from cookie\n\nimport './permission'//全局路由守卫配置, 这里进行路由后台获取的模拟\n\nVue.use(ElementUI, {size: 'small'});\n\n// 挂载到vue的全局(原型上),在每个组件都可以使用 ,prototype是固定的,$axios是自定义的\n//Vue.prototype.$axios = axios;\n// 指定默认的请求域名\n//axios.defaults.baseURL = \"http://dida100.com:8888\"\nVue.prototype.http = http; //挂载到原型上\n  \n//Vue.config.productionTip = false 阻止启动生产消息\n//开发环境下，Vue 会提供很多警告来帮你对付常见的错误与陷阱。\n//而在生产环境下，这些警告语句却没有用，反而会增加应用的体积\nVue.config.productionTip = false\n\n\n\n\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import { validatenull } from '@/utils/validate'\n/**\n * 存储localStorage\n */\nexport const setStore = (params) => {\n    const { name, content, type\n        //datetime \n    } = params\n    const obj = {\n        dataType: typeof (content),\n        content: content,\n        type: type,\n        datetime: new Date().getTime()\n    }\n    if (type) window.sessionStorage.setItem(name, JSON.stringify(obj))\n    else window.localStorage.setItem(name, JSON.stringify(obj))\n}\n/**\n * 获取localStorage\n */\nexport const getStore = (params) => {\n    const {\n        name\n        // type\n    } = params\n    let obj = {}\n    let content\n    obj = window.localStorage.getItem(name)\n    if (validatenull(obj)) obj = window.sessionStorage.getItem(name)\n    if (validatenull(obj)) return\n    \n    obj = JSON.parse(obj)\n    if (obj.dataType === 'string') {\n        content = obj.content\n    } else if (obj.dataType === 'number') {\n        content = Number(obj.content)\n    } else if (obj.dataType === 'boolean') {\n        /* eslint-disable */\n        content = eval(obj.content)\n    } else if (obj.dataType === 'object') {\n        content = obj.content\n    }\n    return content\n}\n/**\n* 删除localStorage\n*/\nexport const removeStore = (params) => {\n    const { name } = params\n    window.localStorage.removeItem(name)\n    window.sessionStorage.removeItem(name)\n}\n/**\n * 获取全部localStorage\n */\nexport const getAllStore = (params) => {\n    const list = []\n    const { type } = params\n    for (let i = 1; i <= window.sessionStorage.length; i++) {\n        if (type) {\n            list.push({\n                name: window.sessionStorage.key(i),\n                content: getStore({\n                    name: window.sessionStorage.key(i),\n                    type: 'session'\n                })\n            })\n        } else {\n            list.push(getStore({\n                name: window.localStorage.key(i),\n                content: getStore({\n                    name: window.localStorage.key(i)\n                })\n            }))\n        }\n    }\n    return list\n}\n/**\n * 清空全部localStorage\n */\nexport const clearStore = (params) => {\n    const { type } = params\n    if (type) {\n        window.sessionStorage.clear()\n        return\n    }\n    window.localStorage.clear()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/localStorage.js"],"sourceRoot":""}